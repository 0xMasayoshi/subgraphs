type Global @entity {
  id: ID!
  swapCount: BigInt!
}

enum PayloadType {
  SOURCE
  DESTINATION
}

type Source @entity {
  id: ID!
  sourcePayload: Payload!
  # destinationPayload: Payload!
  createdAtBlock: BigInt!
  createdAtTimestamp: BigInt!
}


type Payload @entity { 
  id: ID!
  " Type, SOURCE or DESTINATION"
  type: PayloadType! 
  operations: [Operation!]!
  operationCount: Int!
}

type Operation @entity(immutable: true) {
  " txHash:global.operationCount"
  id: ID!
  action: Action!
  value: BigInt!
  data: Bytes!
}

type Action @entity(immutable: true) {
  " Action type, e.g. '1' "
  id: ID! 
  name: String!
}

type Destination @entity {
  id: ID!
  failed: Boolean!
  createdAtBlock: BigInt!
  createdAtTimestamp: BigInt!
}